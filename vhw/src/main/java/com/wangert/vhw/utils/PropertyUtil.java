package com.wangert.vhw.utils;

import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.security.KeyPair;
import java.util.Properties;

public class PropertyUtil {

    Properties properties;
    String path;
//    InputStream inputStream;

    //构造方法
    public PropertyUtil(String path) {
        properties = new Properties();
        this.path = path;
    }

//    //构造方法
//    public PropertyUtil(InputStream path) {
//        properties = new Properties();
//        inputStream = path;
//    }


    //追加数据
    public void appendData(String key, String value, String description) throws Exception {

        FileOutputStream fileOutputStream = new FileOutputStream(path, true);

        properties.clear();

        properties.setProperty(key, value);

        properties.store(fileOutputStream, description);

        fileOutputStream.close();

    }

    //修改键值对
    public void updateData(String key, String value, String description) throws Exception {

        properties.clear();

        FileInputStream inputStream = new FileInputStream(path);

        properties.load(inputStream);
        inputStream.close();

        FileOutputStream fileOutputStream = new FileOutputStream(path);

        properties.setProperty(key, value);
        properties.store(fileOutputStream, description);

        fileOutputStream.close();

    }

    public String getData(String key) throws Exception {

        FileInputStream inputStream = new FileInputStream(path);

        properties.load(inputStream);

        if (properties.getProperty(key) == null) {

            System.out.println("Not exist!!!");

            //System.exit(1);

        }

        String value = properties.getProperty(key);

//        inputStream.close();

        return value;

    }


/*
    public static void main(String[] args) {

        PropertyUtil propertyUtil = new PropertyUtil("src/main/resources/dataCache/test.properties");

        //ECCUtil eccUtil = new ECCUtil();

        try {
            //KeyPair keyPair = eccUtil.getKeyPair();

            //propertyUtil.updateData("jiangludan", "wangjitao", "1");

            System.out.println(propertyUtil.getData("jiangludan"));

            //propertyUtil.appendData("test", "test", "vhwAddressPublicKey");

            //propertyUtil.appendData("vhwAddressPrivateKey", new String(eccUtil.getPrivateKey(keyPair)), "vhwAddressPrivateKey");

            //System.out.println(propertyUtil.getData("wangjitao"));

            //System.out.println(propertyUtil.getData("vhwAddressPrivateKey222"));
        }catch (Exception e) {
            e.printStackTrace();
        }


    }
    */

}
